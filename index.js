////////////////////////////////////////////////////////////////////////
//
// all Import Statment
//
////////////////////////////////////////////////////////////////////////
const express = require('express')
const { getAllUsers, getUserByID, createNewUser, deleteUserByID, updateUserByID } = require('./route')

const app = express() 
const port = 3000

////////////////////////////////////////////////////////////////////////
//
// use the middleware : for data which is get from html body 
// encoding by this middleware 
//
////////////////////////////////////////////////////////////////////////
app.use(express.urlencoded({ extended: true }));

////////////////////////////////////////////////////////////////////////
//
// Entry Point : http://127.0.0.1:3000
//
//////////////////////////////////////////////////////////////////////// 
app.get('/', async (req, res) => {
    return res.status(200).send('<h3> Hello from express RESTapi </h3>')
})

////////////////////////////////////////////////////////////////////////
//
// Function    : GET (REST) API
// Handler     : import from route.js file
// Description : Get all user data from mongodb
// Route       : http://127.0.0.1:3000/user
//
////////////////////////////////////////////////////////////////////////
app.get('/user', getAllUsers)

////////////////////////////////////////////////////////////////////////
//
// Function    : GET (REST) API
// Handler     : import from route.js file
// Description : Get specific user data from mongodb
// route       : http://127.0.0.1:3000/get/user/id
//
////////////////////////////////////////////////////////////////////////
app.get('/get/user/:id',getUserByID)

////////////////////////////////////////////////////////////////////////
//
// Function    : POST (REST) API
// Handler     : import from route.js file
// Description : Create a user into mongodb
// route       : http://127.0.0.1:3000/create/user
//
//////////////////////////////////////////////////////////////////////// 
app.post('/create/user',createNewUser)

////////////////////////////////////////////////////////////////////////
//
// Function    : DELETE(REST) API
// Handler     : import from route.js file
// Description : delete a specific data from mongodb
// route       : http://127.0.0.1:3000/delete/user/:id
//
//////////////////////////////////////////////////////////////////////// 
app.delete('/delete/user/:id',deleteUserByID)

////////////////////////////////////////////////////////////////////////
//
// Function    : PATCH  (REST) API
// Handler     : import from route.js file
// Description : Upadte a existing record from db.json file
// route       : http://127.0.0.1:3000/update/user/:id
//
//////////////////////////////////////////////////////////////////////// 
app.patch('/update/user/:id',updateUserByID)


////////////////////////////////////////////////////////////////////////
// 
// server is on in listen port which is use active sever
//
////////////////////////////////////////////////////////////////////////
app.listen(port, () => {
    console.log(`http://localhost:${port}/`)
})

